<?xml version="1.0" encoding="UTF-8"?>
<config>
<!--
    Yes, this is XML. Sorry. That's just because Java comes with XML
    parsers out of the box, and doesn't for YAML.

    The configuration values in this file can be extended/overridden
    by a neighbor file called mapwarper-local.yml (which is in .gitignore,
    so more convenient for personal preferences), as well as in
    ~/.config/mapwarper/config.yml and several other locations
    appropriate for various platforms.
-->

<!--
    Change this to 2 for a for a 4K display. I haven't found a
    reliable way to autodetect the need for this, sorry.
-->
<systemProperty name="sun.java2d.uiScale" value="1"/>

<swing name="lookAndFeel" value="javax.swing.plaf.nimbus.NimbusLookAndFeel"/>

<!-- ============ T I L E S E T    D E F I N I T I O N S =================== -->

<tileset name="osm"
         desc="OpenStreetmap - Standard"
         weburl="https://openstreetmap.org/?mlat=[LAT]&amp;mlon=[LON]&amp;zoom=[Z]"
         tileurl="https://tile.openstreetmap.org/*.png"
         finestZoom="19"
         darkenMap="true">
  <blurb>&#x00A9; OpenStreetMap contributors</blurb>
</tileset>

<tileset name="osmhot"
         desc="OpenStreetmap - Humanitarian"
         weburl="https://openstreetmap.org/?mlat=[LAT]&amp;mlon=[LON]&amp;zoom=[Z]&amp;layers=H"
         tileurl="https://a.tile.openstreetmap.fr/hot/*.png"
         finestZoom="20"
         darkenMap="true">
  <blurb>&#x00A9; OpenStreetMap contributors</blurb>
  <!-- This might not be particularly useful - railways are not
       especially visible in this rendering - but it is included to
       help demonstrate tile provider agility. -->
</tileset>

<tileset name="transport"
         desc="OpenStreetmap - Transport Map"
         weburl="https://openstreetmap.org/?mlat=[LAT]&amp;mlon=[LON]&amp;zoom=[Z]&amp;layers=T"
         tileurl="https://a.tile.thunderforest.com/transport/*.png?apikey=[APIKEY]"
         finestZoom="21"
         darkenMap="true">
  <blurb>&#x00A9; OpenStreetMap contributors</blurb>
</tileset>

<tileset name="topo"
         desc="OpenTopoMap"
         weburl="https://opentopomap.org/#marker=[Z]/[LAT]/[LON]"
         tileurl="https://a.tile.top-o-map.de/*.png"
         guiTargetZoom="15" finestZoom="17"
         darkenMap="true">
  <blurb>&#x00A9; OpenStreetMap contributors</blurb>
  <blurb>Map rendering &#x00A9; OpenTopoMap.org (CC-BY-SA)</blurb>
</tileset>

<tileset name="google"
         desc="Google Maps aerophotos"
         weburl="https://maps.google.com/?q=[LAT],[LON]&amp;ll=[LAT],[LON]&amp;z=[Z]"
         tileurl="https://khms0.google.com/kh/v=1008?x=[X]&amp;y=[Y]&amp;z=[Z]"
         extension=".jpg"
         guiTargetZoom="18" finestZoom="21">
  <blurb>&#x00A9; Google, I suppose...</blurb>
  <!-- https://stackoverflow.com/questions/32806084/google-map-zoom-parameter-in-url-not-working -->
  <!-- The `v` parameter in the URL increases from time to time, but
       in lockstep globally. It seems to refer to a generation of the
       aerophoto dataset: successive v numbers give different photos
       in _some_ locations, but not everywhere. I bump it to whatever
       google.com/maps uses when I remember to check. -->
</tileset>

<tileset name="bing" type="bing"
         desc="Bing Maps aerophotos"
         weburl="https://www.bing.com/maps?v=2&amp;cp=[LAT]%7E[LON]&amp;style=l&amp;lvl=[Z]"
         tileurl="https://t.ssl.ak.tiles.virtualearth.net/tiles/a*.jpeg?g=14736&amp;n=z&amp;prx=1"
         extension=".jpg"
         guiTargetZoom="18" finestZoom="20">
  <blurb>&#x00A9; Microsoft, I suppose...</blurb>
</tileset>

<tileset name="openrail"
         desc="OpenRailwayMap"
         tileurl="https://a.tiles.openrailwaymap.org/standard/*.png"
         tilesize="512" guiTargetZoom="20" finestZoom="20"
         lensOnly="true">
  <blurb>&#x00A9; OpenStreetMap contributors</blurb>
  <blurb>Style: CC-BY-SA 2.0, OpenRailwayMap.org</blurb>
</tileset>

<tileset name="geodanmark"
         desc="GeoDanmark orthophotos"
         tileurl="https://services.datafordeler.dk/GeoDanmarkOrto/orto_foraar_webm/1.0.0/WMTS/orto_foraar_webm/default/DFD_GoogleMapsCompatible/[Z]/[Y]/[X].jpg?[APIKEY]"
         disableHttpsValidation="true"
         guiTargetZoom="18" finestZoom="20">
  <!-- Beware: this tileset is scheduled to go away in mid-2026. After
       that you'll need to use the definition below instead.
       Unfortunately there's more red tape _and_ more downloading
       involved there. -->
  <blurb>Aerophotos cover Denmark only</blurb>
  <blurb>From www.geodanmark.dk -- CC-BY-4.0</blurb>
  <boundingBox>560922560::324748672</boundingBox>
  <boundingBox>575166809::341940864</boundingBox>
</tileset>
<apiKey name="geodanmark" value="username=IBJZYUIBGO&amp;password=6qKAh-QH364c">
  <!-- https://confluence.sdfi.dk/pages/viewpage.action?pageId=13665234

       Via WebGIS er det muligt at se brugernavn/adgangskode for
       tjenestebrugere ved hjælp af udviklerværktøjerne i en browser.
       Da det er offentlige frie data, så betyder det ikke
       rettighedsmæssigt noget, at brugernavn og adgangskode for
       tjenestebrugeren bliver vist.

       Brug en unik eller en autogenereret adgangskode til hver tjenestebruger.
       Du skal ikke genbruge adgangskoder fra andre systemer eller
       enheder.
  -->
</apiKey>

<tileset name="geodk" type="geodk"
         desc="GeoDanmark orthophotos (1&#x00D7;1 km tiles)"
         tileurl="https://api.datafordeler.dk/FileDownloads/GetRasterMultipleFiles?MinX=~X~001&amp;MaxX=~X~999&amp;MinY=~Y~001&amp;MaxY=~Y~999&amp;Register=GeoDKO&amp;DataSetName=GeoDKO12,5cm&amp;Version=1&amp;apiKey=[APIKEY]"
         disableHttpsValidation="true"
         extension=".zip"
         useAsBackground="false"
         coarsestZoom="15" guiTargetZoom="18" finestZoom="19">
  <!-- there's also a GetRasterFile API getting a single file, but I
       cannot figure out how to get it to deliver the 12.5 cm
       resolution. -->
  <blurb>Aerophotos cover Denmark only</blurb>
  <blurb>From www.geodanmark.dk -- CC-BY-4.0</blurb>
  <boundingBox>560922560::324748672</boundingBox>
  <boundingBox>575166809::341940864</boundingBox>
</tileset>

<!-- ============ K E Y    B I N D I N G S ======================= -->

<!-- At least the ones of them that work uniformly enough to make
     reconfiguration meaningful. They can be overridden in local
     config files. It should even be possible to bind several keys
     to the same command, though it may be somewhat nondeterministic
     which of them show up in the menu entry for the command. -->
<!-- The command names _probably_ won't change, but I'm not making
     any particularly strong commitment to keep them stable. Be
     prepared to have to update personal overrides from time to time. -->

<keybind name="C-C" value="copy"/>
<keybind name="C-I" value="reverse"/>
<keybind name="C-L" value="repaint"/>
<keybind name="C-N" value="new"/>
<keybind name="C-O" value="open"/>
<keybind name="C-Q" value="quit"/>
<keybind name="C-S" value="saveAll"/>
<keybind name="C-V" value="paste"/>
<keybind name="C-X" value="cut"/>
<keybind name="C-Y" value="redo.1"/>
<keybind name="C-Z" value="undo.1"/>

<!-- Escape is multi-functional and hardcoded -->
<keybind name="S-F2" value="GC"/>
<keybind name="S-F3" value="nearestNode"/>
<keybind name="F5" value="downloadMap"/>
<keybind name="F6" value="supersample"/>
<keybind name="F7" value="darkenMap"/>
<keybind name="F8" value="showCurvature"/>
<keybind name="F9" value="showBounds"/>
<keybind name="F10" value="showCrosshairs"/>
<keybind name="F11" value="showTrack"/>
<keybind name="F12" value="explore"/>

<keybind name="`" value="newchain"/>
<keybind name="1" value="zoom100"/>
<keybind name="2" value="rotate"/>
<keybind name="0" value="unsqueeze"/>
<keybind name="-" value="zoomOut"/>
<keybind name="+" value="zoomIn"/>
<keybind name="Insert" value="newchain"/>
<keybind name="Home" value="unzoom"/>

<keybind name="Tab" value="toggleFilePane"/>
<keybind name="S-Tab" value="toggleTilePane"/>
<keybind name="Q" value="quickwarp"/>
<keybind name="M-Q" value="circlewarp"/>
<keybind name="W" value="warp"/>
<keybind name="S-W" value="lens.bing"/>
<keybind name="E" value="weakOrtho"/>
<keybind name="S-E" value="lens.google"/>
<keybind name="R" value="ortho"/>
<keybind name="S-R" value="lens.osm"/>
<keybind name="S-T" value="lens.openrail"/>
<keybind name="U" value="teleport"/>
<keybind name="O" value="filepick"/>
<keybind name="[" value="lensMinus"/>
<keybind name="{" value="tdebugMinus"/>
<keybind name="]" value="lensPlus"/>
<keybind name="}" value="tdebugPlus"/>
<keybind name="\" value="toggleTilePane"/>

<keybind name="A" value="MAGIC"/>
<keybind name="S" value="STRONG"/>
<keybind name="D" value="SLEW"/>
<keybind name="M-G" value="tilegrid"/>
<keybind name="G" value="getTile"/>
<keybind name="H" value="lock"/>
<keybind name="L" value="lens"/>
<!-- Enter is hardcoded to the file pane -->

<keybind name="Z" value="zoom"/>
<keybind name="X" value="delete"/>
<keybind name="C" value="TRACK"/>
<keybind name="V" value="WEAK"/>
<keybind name="B" value="BOUND"/>
<keybind name="N" value="LBOUND"/>
<keybind name="M" value="Mapwarper v3"/> <!-- the "move" tool calls itself this -->
<keybind name="S-M" value="measure"/>
<keybind name="&lt;" value="squeeze"/>
<keybind name="&gt;" value="stretch"/>
<keybind name="Space" value="refresh"/>

<!-- Arrow keys are hardcoded: they depend on whether the file pane is shown. -->

</config>
